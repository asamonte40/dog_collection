<!DOCTYPE html>
<html lang="en">
  <head>
    <title><%= content_for(:title) || "Dog Collection" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">


    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <style>
    .h3 {
      color: #ff6b88;
    }
    /*search bar style */
    form.d-flex input[type="text"],
    form.d-flex input[type="search"] {
      border: 2px solid #ff8fab;
      border-radius: 8px;
      padding: 10px;
      transition: box-shadow 0.3s ease;
    }

    form.d-flex input[type="text"]:focus,
    form.d-flex input[type="search"]:focus {
      box-shadow: 0 0 8px rgba(255, 143, 171, 0.5);
      outline: none;
    }

    /* search button */
    form.d-flex .btn {
      background-color: #ff8fab;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      transition: background-color 0.3s ease;
    }

    form.d-flex .btn:hover {
      background-color: #ff6b88;
    }

    /* pages dropdown styling */
    .dropdown .btn-secondary {
      background-color: #ff8fab;
      border: none;
      color: white;
      border-radius: 8px;
      transition: background-color 0.3s ease;
    }

    .dropdown .btn-secondary:hover {
      background-color: #ff6b88;
    }

    .dropdown-menu {
      border-radius: 10px;
      border: 1px solid #ffd1dc;
    }

    .dropdown-menu .dropdown-item:hover {
      background-color: #ffe6eb;
      color: #ff4f6d;
    }

    /* remove underlines from links */
    a, .dropdown-item, .card-title a {
      text-decoration: none !important;
    }

    /*center the whole header better */
    .d-flex {
      align-items: center;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #fef6f5;
      color: #333;
      line-height: 1.6;
      padding: 1rem;
    }

    .container {
      max-width: 1200px; /* make the grid wide */
      margin: 2rem auto;
    }

    .top-section form {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .top-section input,
    .top-section select,
    .top-section button {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      border-radius: 0;
      outline: none;
      border: 1px solid #ccc;
      padding: 0.5rem 0.75rem;
      font-family: inherit;
      font-size: 1rem;
      background-color: #fff;
      color: #333;
    }

    .top-section button {
      background-color: #ff7f50;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
    }

    .top-section button:hover {
      background-color: #e65c2f;
    }

    .card {
      background-color: #ffffff;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .card-img-top {
      width: 100%;
      height: 200px; /* uniform image height */
      object-fit: cover; /* crop images */
    }

    .card-body {
      min-height: 140px;
      padding: 1rem;
    }

    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 0.5rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .card-title a {
      text-decoration: none;
      color: inherit;
    }

    .card-text {
      font-size: 0.95rem;
      color: #555;
      max-height: 4rem; /* roughly 3 lines */
      overflow: hidden;
    }

    .pagination {
      justify-content: center;
      margin-top: 2rem;
    }

    .btn {
      background-color: #ff8fab;
      border: none;
      color: white;
    }

    .btn:hover {
      background-color: #ff4f6d;
    }

    ul {
    list-style-type: none;
    }
  </style>
  </head>

 <body class="p-3">

    <!-- header with brand and navigation -->
    <div class="d-flex justify-content-between align-items-center mb-3">

      <!-- brand -->
      <h1 class="h3 mb-0">Dog Collection</h1>

      <!-- search bar -->
      <div class="flex-grow-1 mx-3">
        <% search_url =
          case controller_name
          when "dogs" then dogs_path
          when "owners" then owners_path
          when "breeds" then breeds_path
          else "#"  # fallback for pages like "about"
          end %>

        <%= form_with url: search_url, method: :get, local: true, class: "d-flex justify-content-center" do |form| %>
          <% if controller_name == "dogs" %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search for Dogs Names", class: "form-control me-2 w-50" %>
          <% elsif controller_name == "owners" %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search for Owners Names", class: "form-control me-2 w-50" %>
          <% elsif controller_name == "breeds" %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search for Type of Breeds", class: "form-control me-2 w-50" %>
          <% else %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search", class: "form-control me-2 w-50", disabled: true %>
          <% end %>
          <%= form.submit "Search", class: "btn btn-outline-primary" %>
        <% end %>
      </div>

      <!-- pages dropdown at the corner -->
      <div class="dropdown">
        <a class="btn btn-secondary dropdown-toggle"
           href="#"
           role="button"
           id="pagesDropdown"
           data-bs-toggle="dropdown"
           aria-expanded="false">
          Pages
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="pagesDropdown">
          <li><%= link_to "Home", root_path, class: "dropdown-item" %></li>
          <li><%= link_to "About", about_path, class: "dropdown-item" %></li>
          <li><%= link_to "Owners", owners_path, class: "dropdown-item" %></li>
          <li><%= link_to "Dogs", dogs_path, class: "dropdown-item" %></li>
          <li><%= link_to "Breeds", breeds_path, class: "dropdown-item" %></li>
        </ul>
      </div>
    </div>

    <!-- main content -->
    <%= yield %>
  <!-- bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
