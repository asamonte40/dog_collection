<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Dog Collection" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">


    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

 <body class="p-3">

    <!-- header with brand and navigation -->
    <div class="d-flex justify-content-between align-items-center mb-3">

      <!-- brand -->
      <h1 class="h3 mb-0">Dog Collection</h1>

      <!-- search bar -->
      <div class="flex-grow-1 mx-3">
        <% search_url =
          case controller_name
          when "dogs" then dogs_path
          when "owners" then owners_path
          when "breeds" then breeds_path
          else "#"  # fallback for pages like "about"
          end %>

        <%= form_with url: search_url, method: :get, local: true, class: "d-flex justify-content-center" do |form| %>
          <% if controller_name == "dogs" %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search for Dogs Names", class: "form-control me-2 w-50" %>
          <% elsif controller_name == "owners" %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search for Owners Names", class: "form-control me-2 w-50" %>
          <% elsif controller_name == "breeds" %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search for Type of Breeds", class: "form-control me-2 w-50" %>
          <% else %>
            <%= form.text_field :q, value: params[:q], placeholder: "Search", class: "form-control me-2 w-50", disabled: true %>
          <% end %>
          <%= form.submit "Search", class: "btn btn-outline-primary" %>
        <% end %>
      </div>

      <!-- pages dropdown at the corner -->
      <div class="dropdown">
        <a class="btn btn-secondary dropdown-toggle"
           href="#"
           role="button"
           id="pagesDropdown"
           data-bs-toggle="dropdown"
           aria-expanded="false">
          Pages
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="pagesDropdown">
          <li><%= link_to "Home", root_path, class: "dropdown-item" %></li>
          <li><%= link_to "About", about_path, class: "dropdown-item" %></li>
          <li><%= link_to "Owners", owners_path, class: "dropdown-item" %></li>
          <li><%= link_to "Dogs", dogs_path, class: "dropdown-item" %></li>
          <li><%= link_to "Breeds", breeds_path, class: "dropdown-item" %></li>
        </ul>
      </div>
    </div>

    <!-- main content -->
    <%= yield %>
  <!-- bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
